import{d as Z,r as s,o as f,c as m,i as e,j as o,l as y,h as x,v as C,t as u,m as $,e as D,w as L,q as ee,s as A,b as ae,f as G,p as se,k as te,_ as le}from"./index-EejqKmlh.js";import{j as oe,a as ie,_ as ne,b as ce,c as re}from"./judge-xJS3uye-.js";import{e as N,s as ue}from"./message-pw9Rr1l4.js";import{u as de,p as R}from"./request-lDjR4_Aw.js";const i=h=>(se("data-v-ed518c76"),h=h(),te(),h),ve={class:"main-box"},pe=i(()=>e("img",{src:ne,class:"circle"},null,-1)),fe={class:"panel"},me=i(()=>e("img",{src:ce,style:{transform:"scale(0.7)","-webkit-user-drag":"none"}},null,-1)),he={class:"contents"},ge=i(()=>e("div",{class:"cloudmind"},[e("img",{src:re})],-1)),_e=i(()=>e("button",null,"注 册",-1)),be={class:"input"},we={key:0,class:"email"},ke=i(()=>e("i",{class:"iconfont icon-user-solid",style:{color:"rgb(187, 186, 186)"}},null,-1)),ye={key:1,class:"getCaptcah"},xe=i(()=>e("i",{class:"iconfont icon-shield-alt-solid",style:{color:"rgb(187, 186, 186)"}},null,-1)),Ce={key:2,class:"password"},Me=i(()=>e("i",{class:"iconfont icon-lock-solid",style:{color:"rgb(187, 186, 186)"}},null,-1)),Be={key:3,class:"confirm-password"},Ie=i(()=>e("i",{class:"iconfont icon-lock-solid",style:{color:"rgb(187, 186, 186)"}},null,-1)),Ve={class:"agreements"},Pe=i(()=>e("label",{for:"agreement",class:"agreement-lable"},"已阅读并同意以下协议 ",-1)),Se=ee('<div class="third" data-v-ed518c76><div class="third-login" data-v-ed518c76><div data-v-ed518c76></div><div data-v-ed518c76>第三方登录</div><div data-v-ed518c76></div></div><div data-v-ed518c76><a href="" target="_blank" data-v-ed518c76><i class="iconfont icon-qq qq" data-v-ed518c76></i></a><a href="" target="_blank" data-v-ed518c76><i class="iconfont icon-weixin weixin" data-v-ed518c76></i></a><a href="https://github.com/login/oauth/authorize?client_id=2b3644ed24902ef9eb6f&amp;redirect_uri=http://apisix.cloudmind.top/auth/githubLogin" target="_blank" data-v-ed518c76><i class="iconfont icon-gitub gitub" data-v-ed518c76></i></a><a href="https://gitee.com/oauth/authorize?client_id=10dfe502136745d1f135474390c4cb6cd50fce3a5bf7a167891d3b0ec184d2eb&amp;redirect_uri=http://apisix.cloudmind.top/auth/giteeLogin&amp;response_type=code" target="_blank" data-v-ed518c76><i class="iconfont icon-gitee1 gitee" data-v-ed518c76></i></a></div></div>',1),Te=Z({__name:"register",setup(h){const z=de(),n=s(""),c=s(""),r=s(""),d=s(""),g=s(""),_=s(""),M=s(""),B=s(""),b=s(!1),I=s(!0),v=s(!1),V=s(!1),P=s(!1),S=s(!1),w=s(!1),k=s(!1),T=s(!1),U=s(!1),j=s(!1),E=s("下一步"),q=s("获取验证码"),F=()=>{if(n.value===""){v.value=!0,d.value="邮箱不能为空";return}b.value=oe(n.value),b.value?(v.value=!1,d.value=""):(v.value=!0,d.value="邮箱格式不正确")},H=()=>{if(c.value===""){w.value=!0,g.value="验证码不能为空";return}c.value.length<6?(w.value=!0,g.value="验证码格式不正确"):(w.value=!1,g.value="")},J=()=>{if(r.value===""){k.value=!0,_.value="密码不能为空";return}ie(r.value)?(k.value=!1,_.value="",V.value=!0):(k.value=!0,_.value="密码格式不正确，必须同时包含数字和字母",V.value=!1)},K=()=>{M.value!==r.value?(j.value=!0,B.value="两次密码不一致",T.value=!1):(j.value=!1,B.value="",T.value=!0)},O=()=>!!(V.value&&T.value),Q=()=>{if(b.value){U.value=!0,R("/auth/sendEmail",{email:n.value,subject:"注册"});let t=60,a=setInterval(()=>{t--,q.value=`${t}s后重新获取`,t===0&&(clearInterval(a),q.value="重新获取")},1e3)}else v.value=!0,d.value="邮箱格式不正确",U.value=!1},W=()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let p=0;p<8;p++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},X=()=>{if(E.value==="下一步")b.value&&c.value.length===6&&U.value?(E.value="注 册",I.value=!1,S.value=!0):N("请先填写正确的邮箱和验证码");else if(O())if(P.value){const t=W();R("/auth/register",{name:t,email:n.value,sex:1,password:r.value,code:c.value}).then(a=>{z.setUserInfo(a.userId,a.shortToken,a.longToken,a.chatToken,!1),z.localSetUserInfo(a.userId,a.shortToken,a.longToken,a.chatToken,!1),ue("注册成功"),A.push("/")})}else N("请阅读并同意用户协议和隐私政策");else N("请先填写正确的密码")},Y=()=>A.push("/login");return(t,a)=>{const p=ae("router-link");return f(),m("div",ve,[pe,e("div",fe,[me,e("div",he,[ge,e("div",{class:"switch"},[e("button",{style:{cursor:"pointer"},onClick:Y},"登 录"),_e]),e("div",be,[I.value?(f(),m("div",we,[ke,o(e("input",{type:"text",placeholder:"输入邮箱",class:"email-input",autocomplete:"new-password","onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),onBlur:F},null,544),[[y,n.value]])])):x("",!0),o(e("div",{class:"email-msg"},"* "+u(d.value),513),[[C,v.value]]),I.value?(f(),m("div",ye,[xe,o(e("input",{type:"text",placeholder:"输入验证码",class:"captcha-input","onUpdate:modelValue":a[1]||(a[1]=l=>c.value=l),onBlur:H},null,544),[[y,c.value]]),e("button",{onClick:Q,class:"captcha-button"},u(q.value),1)])):x("",!0),o(e("div",{class:"captcha-msg"},"* "+u(g.value),513),[[C,w.value]]),S.value?(f(),m("div",Ce,[Me,o(e("input",{type:"password",placeholder:"输入密码(8-16位字符)",class:"password-input","onUpdate:modelValue":a[2]||(a[2]=l=>r.value=l),onBlur:J},null,544),[[y,r.value]])])):x("",!0),o(e("div",{class:"password-msg"},"* "+u(_.value),513),[[C,k.value]]),S.value?(f(),m("div",Be,[Ie,o(e("input",{type:"password",placeholder:"确认密码",class:"confirm-password-input","onUpdate:modelValue":a[3]||(a[3]=l=>M.value=l),onBlur:K},null,544),[[y,M.value]])])):x("",!0),o(e("div",{class:"confirm-password-msg"},"* "+u(B.value),513),[[C,j.value]]),e("button",{class:"register-button",onClick:X},u(E.value),1),e("div",Ve,[o(e("input",{type:"checkbox",id:"agreement",style:{"vertical-align":"middle"},"onUpdate:modelValue":a[4]||(a[4]=l=>P.value=l)},null,512),[[$,P.value]]),Pe,D(p,{to:"/agreements_user",style:{color:"rgba(60, 176, 253, 1)","text-decoration":"none","vertical-align":"middle"}},{default:L(()=>[G(" 用户协议、")]),_:1}),D(p,{to:"/agreements_privacy",style:{color:"rgba(60, 176, 253, 1)","text-decoration":"none","vertical-align":"middle"}},{default:L(()=>[G("隐私政策")]),_:1})])]),Se])])])}}}),Ne=le(Te,[["__scopeId","data-v-ed518c76"]]);export{Ne as default};
